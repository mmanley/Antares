# This file defines what ends up in the CD boot image and it executes the
# rules building the image.

#ANTARES_BOOT_FLOPPY = antares-boot-floppy.image ;
#MakeLocate $(ANTARES_BOOT_FLOPPY) : $(ANTARES_OUTPUT_DIR) ;

# CD image target
ANTARES_CD_BOOT_PPC_IMAGE = antares-boot-cd-ppc.iso ;
MakeLocate $(ANTARES_CD_BOOT_PPC_IMAGE) : $(ANTARES_OUTPUT_DIR) ;

# the pseudo target all archive contents is attached to
NotFile $(ANTARES_CD_BOOT_PPC_IMAGE_CONTAINER_NAME) ;

local elfloader = boot_loader_openfirmware ;
local coffloader = boot_loader_openfirmware_coff ;

# OpenFirmware / Mac boot support files:

# CHRP script
local chrpboot = ofboot.b ;

# HFS creator and application type mapping for mkisofs
local hfsmaps = hfs.map ;

# extra files to put on the boot iso
local extras = README.html ;

SEARCH on $(chrpboot) $(hfsmaps) $(extras) = [ FDirName $(ANTARES_TOP) data boot_cd ] ;



BuildCDBootPPCImage $(ANTARES_CD_BOOT_PPC_IMAGE) : $(hfsmaps) : $(elfloader) : $(coffloader) : $(chrpboot) : $(extras) ;


NotFile antares-boot-cd-ppc ;
Depends antares-boot-cd-ppc : $(ANTARES_CD_BOOT_PPC_IMAGE) ;


